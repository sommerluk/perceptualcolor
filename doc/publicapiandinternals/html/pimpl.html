<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PerceptualColor: Pointer to implementation idiom</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PerceptualColor
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('pimpl.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Pointer to implementation idiom </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This library uses the <em>pointer to implementation</em> idiom (also known as pimpl idiom, d-pointer idiom or opaque-pointer idiom) in almost all classes that are part of the public API, and also in some classes that are part of the private API.</p>
<p>This idiom is also used by Qt itself, and Qt even provides some macros and extension points (<code>Q_DECLARE_PRIVATE</code>, <code>Q_D</code>, a protected member called <code>d_ptr</code> in almost all classes…), that help dealing with the pimpl idiom. Though available, these Qt features are not officially documentated; and they would also interfer with private implementations of Qt itself without documented behaviour, which seems inappropriate. Furthermore, the Qt pimpl idiom is complicate because it uses (for performance reasons) inheritance between the private implementation classes. This breaks, however, the encapsulation, because all formerly private elements of a class become protected know. Our class hierarchy is not that deep, so the performance gain might not be worth the additional code complexity. Therefore, this library uses a more simple pimpl idiom without inheritance of the private implementation. It has however all the other features of the Qt pimpl idiom, including <code>const</code> propagating access to the private implementation thanks to <a class="el" href="class_perceptual_color_1_1_const_propagating_unique_pointer.html">PerceptualColor::ConstPropagatingUniquePointer</a> and <a class="el" href="class_perceptual_color_1_1_const_propagating_raw_pointer.html">PerceptualColor::ConstPropagatingRawPointer</a>. And, at difference to Qt’s pimpl idiom, it keeps private code strictly private. Note however, that switching later from our current pimpl idiom to the polymorph Qt pimpl idiom would break the binary compatibility. See also the document <em> <a href="https://accu.org/journals/overload/18/100/love_1718/">Interface Versioning in C++</a></em> and KDE’s information document <em> <a href="https://community.kde.org/Policies/Binary_Compatibility_Issues_With_C%2B%2B">Binary Compatibility Issues With C++</a></em> and for details.</p>
<dl class="section note"><dt>Note</dt><dd>It would be nice to have the d_pointer and q_pointer be themselfs be declared <code>const</code>, because this would clearly communicate that those pointers are not expected to change the adress they point to. Unfortunely, apparently this does not work with neither <a class="el" href="class_perceptual_color_1_1_const_propagating_unique_pointer.html">PerceptualColor::ConstPropagatingUniquePointer</a> nor <a class="el" href="class_perceptual_color_1_1_const_propagating_raw_pointer.html">PerceptualColor::ConstPropagatingRawPointer</a> as it would change also all the access rights to the pointed object to always <code>const</code>. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
